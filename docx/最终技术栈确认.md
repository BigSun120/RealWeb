# æœ€ç»ˆæŠ€æœ¯æ ˆç¡®è®¤

## ä¸€ã€æŠ€æœ¯æ ˆæ€»è§ˆ

### ğŸ¯ ç¡®å®šçš„æŠ€æœ¯é€‰å‹
åŸºäºæ‚¨çš„è¦æ±‚ï¼Œæœ€ç»ˆç¡®å®šçš„æŠ€æœ¯æ ˆå¦‚ä¸‹ï¼š

| åˆ†ç±» | æŠ€æœ¯é€‰æ‹© | è¯´æ˜ |
|------|----------|------|
| **å‰ç«¯æ¡†æ¶** | Vue 3 + Vite | ç°ä»£åŒ–å‰ç«¯å¼€å‘ |
| **UIç»„ä»¶åº“** | Element Plus | ä¸°å¯Œçš„ç»„ä»¶ç”Ÿæ€ |
| **çŠ¶æ€ç®¡ç†** | Pinia | Vue 3å®˜æ–¹æ¨è |
| **åç«¯æ¡†æ¶** | Node.js + Express | è½»é‡çº§Webæ¡†æ¶ |
| **æ•°æ®åº“** | MongoDB | æ–‡æ¡£å‹æ•°æ®åº“ |
| **ç¼“å­˜æ–¹æ¡ˆ** | node-cache | å†…å­˜ç¼“å­˜ï¼Œæ— éœ€Redis |
| **è®¤è¯æ–¹æ¡ˆ** | JWT | æ— çŠ¶æ€è®¤è¯ |
| **éƒ¨ç½²æ–¹å¼** | ç›´æ¥éƒ¨ç½² | æ— Dockerï¼Œç®€åŒ–éƒ¨ç½² |
| **è¿›ç¨‹ç®¡ç†** | PM2ï¼ˆå¯é€‰ï¼‰ | ç”Ÿäº§ç¯å¢ƒæ¨è |
| **ç›‘æ§æ–¹æ¡ˆ** | æ—  | å»é™¤å¤æ‚ç›‘æ§ç³»ç»Ÿ |

## äºŒã€æ¶æ„ç®€åŒ–å¯¹æ¯”

### ğŸ“Š ç®€åŒ–å‰åå¯¹æ¯”

| ç»„ä»¶ | åŸæ–¹æ¡ˆ | æœ€ç»ˆæ–¹æ¡ˆ | ç®€åŒ–æ•ˆæœ |
|------|--------|----------|----------|
| **æ•°æ®å­˜å‚¨** | MongoDB + Redis | MongoDB + å†…å­˜ç¼“å­˜ | âœ… å‡å°‘1ä¸ªæœåŠ¡ |
| **éƒ¨ç½²æ–¹å¼** | Docker + Nginx + PM2 | ç›´æ¥éƒ¨ç½² + PM2 | âœ… å¤§å¹…ç®€åŒ– |
| **ç›‘æ§ç³»ç»Ÿ** | Prometheus + Grafana + ELK | åŸºç¡€æ—¥å¿— | âœ… å®Œå…¨ç§»é™¤ |
| **é…ç½®æ–‡ä»¶** | 15+ ä¸ªé…ç½®æ–‡ä»¶ | 6ä¸ªæ ¸å¿ƒé…ç½® | âœ… å‡å°‘60% |
| **å­¦ä¹ æˆæœ¬** | é«˜ | ä½ | âœ… é€‚åˆä¸ªäººé¡¹ç›® |

## ä¸‰ã€é¡¹ç›®ç»“æ„

### ğŸ“ æœ€ç»ˆé¡¹ç›®ç»“æ„
```
personal-website/
â”œâ”€â”€ frontend/                 # Vue3å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/       # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ views/           # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ stores/          # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ router/          # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ api/             # APIè¯·æ±‚å°è£…
â”‚   â”œâ”€â”€ public/
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ backend/                  # Node.jsåç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ controllers/     # æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ models/          # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ routes/          # è·¯ç”±å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ middleware/      # ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ uploads/             # æ–‡ä»¶ä¸Šä¼ ç›®å½•
â”‚   â”œâ”€â”€ logs/                # æ—¥å¿—ç›®å½•
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ docs/                    # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ rules/                   # é…ç½®æ–‡ä»¶å’Œè§„èŒƒ
â”‚   â”œâ”€â”€ .eslintrc.js
â”‚   â”œâ”€â”€ .prettierrc.js
â”‚   â”œâ”€â”€ .gitignore
â”‚   â”œâ”€â”€ .env.example
â”‚   â””â”€â”€ deploy.sh
â”œâ”€â”€ .env                     # ç¯å¢ƒå˜é‡ï¼ˆéœ€åˆ›å»ºï¼‰
â””â”€â”€ package.json             # æ ¹ç›®å½•è„šæœ¬
```

## å››ã€æ ¸å¿ƒä¾èµ–

### ğŸ”§ å‰ç«¯ä¾èµ–
```json
{
  "dependencies": {
    "vue": "^3.3.0",
    "vue-router": "^4.2.0",
    "pinia": "^2.1.0",
    "element-plus": "^2.3.0",
    "axios": "^1.4.0"
  },
  "devDependencies": {
    "vite": "^4.3.0",
    "@vitejs/plugin-vue": "^4.2.0",
    "sass": "^1.62.0"
  }
}
```

### âš™ï¸ åç«¯ä¾èµ–
```json
{
  "dependencies": {
    "express": "^4.18.0",
    "mongoose": "^7.3.0",
    "jsonwebtoken": "^9.0.0",
    "bcryptjs": "^2.4.3",
    "node-cache": "^5.1.2",
    "multer": "^1.4.5",
    "cors": "^2.8.5",
    "helmet": "^7.0.0",
    "express-rate-limit": "^6.7.0",
    "winston": "^3.9.0"
  },
  "devDependencies": {
    "nodemon": "^2.0.22",
    "jest": "^29.5.0"
  }
}
```

## äº”ã€ç¯å¢ƒé…ç½®

### ğŸŒ ç¯å¢ƒå˜é‡é…ç½®
```bash
# .env æ–‡ä»¶é…ç½®
NODE_ENV=development
PORT=8000
MONGODB_URI=mongodb://localhost:27017/personal_website_dev
JWT_SECRET=your_super_secret_jwt_key_here
UPLOAD_PATH=./uploads
FRONTEND_URL=http://localhost:3000
```

### ğŸš€ å¿«é€Ÿå¯åŠ¨å‘½ä»¤
```bash
# å¼€å‘ç¯å¢ƒ
npm run dev          # åŒæ—¶å¯åŠ¨å‰åç«¯å¼€å‘æœåŠ¡å™¨

# ç”Ÿäº§éƒ¨ç½²
npm run setup        # å®‰è£…æ‰€æœ‰ä¾èµ–
npm run build        # æ„å»ºå‰ç«¯
npm start           # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨

# æˆ–ä½¿ç”¨ä¸€é”®éƒ¨ç½²è„šæœ¬
chmod +x rules/deploy.sh
./rules/deploy.sh
```

## å…­ã€æ•°æ®åº“è®¾è®¡

### ğŸ—„ï¸ MongoDBé›†åˆè®¾è®¡
```javascript
// ç”¨æˆ·é›†åˆ
users: {
  _id: ObjectId,
  username: String,
  email: String,
  password: String,    // bcryptåŠ å¯†
  avatar: String,
  bio: String,
  role: String,        // 'admin' | 'user'
  createdAt: Date,
  updatedAt: Date
}

// æ–‡ç« é›†åˆ
articles: {
  _id: ObjectId,
  title: String,
  content: String,     // Markdownæ ¼å¼
  authorId: ObjectId,  // å…³è”users
  category: String,
  tags: [String],
  coverImage: String,
  viewCount: Number,
  likeCount: Number,
  status: String,      // 'published' | 'draft'
  createdAt: Date,
  updatedAt: Date
}

// è¯„è®ºé›†åˆ
comments: {
  _id: ObjectId,
  articleId: ObjectId, // å…³è”articles
  userId: ObjectId,    // å…³è”users
  content: String,
  parentId: ObjectId,  // å›å¤åŠŸèƒ½
  createdAt: Date
}

// æ¸¸æˆé›†åˆ
games: {
  _id: ObjectId,
  name: String,
  description: String,
  category: String,
  thumbnail: String,
  url: String,
  playCount: Number,
  createdAt: Date
}

// æ¸¸æˆåˆ†æ•°é›†åˆ
gameScores: {
  _id: ObjectId,
  gameId: ObjectId,    // å…³è”games
  userId: ObjectId,    // å…³è”users
  score: Number,
  createdAt: Date
}
```

## ä¸ƒã€ç¼“å­˜ç­–ç•¥

### ğŸ’¾ å†…å­˜ç¼“å­˜ä½¿ç”¨
```javascript
const NodeCache = require('node-cache');

// ç¼“å­˜å®ä¾‹
const cache = new NodeCache({ 
  stdTTL: 600,        // é»˜è®¤10åˆ†é’Ÿ
  checkperiod: 120    // æ¯2åˆ†é’Ÿæ£€æŸ¥è¿‡æœŸ
});

// ç¼“å­˜ä½¿ç”¨ç¤ºä¾‹
// çƒ­é—¨æ–‡ç« ç¼“å­˜1å°æ—¶
cache.set('articles:hot', hotArticles, 3600);

// æ–‡ç« åˆ—è¡¨ç¼“å­˜10åˆ†é’Ÿ
cache.set(`articles:page:${page}`, articles, 600);

// æ¸¸æˆæ’è¡Œæ¦œç¼“å­˜5åˆ†é’Ÿ
cache.set(`game:${gameId}:ranking`, rankings, 300);
```

## å…«ã€å®‰å…¨æªæ–½

### ğŸ”’ åŸºç¡€å®‰å…¨é…ç½®
```javascript
// å®‰å…¨ä¸­é—´ä»¶
app.use(helmet());                    // å®‰å…¨å¤´
app.use(cors({ origin: process.env.FRONTEND_URL })); // CORS
app.use(rateLimit({                   // åŸºç¡€é™æµ
  windowMs: 15 * 60 * 1000,
  max: 100
}));

// JWTè®¤è¯
const jwt = require('jsonwebtoken');
const token = jwt.sign({ userId }, process.env.JWT_SECRET, { expiresIn: '24h' });

// å¯†ç åŠ å¯†
const bcrypt = require('bcryptjs');
const hashedPassword = await bcrypt.hash(password, 12);
```

## ä¹ã€éƒ¨ç½²æ–¹æ¡ˆ

### ğŸš€ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
```bash
# 1. æœåŠ¡å™¨å‡†å¤‡
# - å®‰è£…Node.js 16+
# - å®‰è£…MongoDB
# - é…ç½®é˜²ç«å¢™

# 2. ä»£ç éƒ¨ç½²
git clone your-repository
cd personal-website
cp rules/.env.example .env
# ç¼–è¾‘.envæ–‡ä»¶é…ç½®ç”Ÿäº§ç¯å¢ƒå‚æ•°

# 3. å®‰è£…ä¾èµ–å’Œæ„å»º
npm run setup
npm run build

# 4. å¯åŠ¨æœåŠ¡
# æ–¹å¼1ï¼šç›´æ¥è¿è¡Œ
npm start

# æ–¹å¼2ï¼šPM2ç®¡ç†ï¼ˆæ¨èï¼‰
npm install -g pm2
pm2 start backend/app.js --name website
pm2 startup
pm2 save
```

## åã€å¼€å‘æµç¨‹

### ğŸ‘¨â€ğŸ’» å¼€å‘å·¥ä½œæµ
```bash
# 1. å¼€å‘ç¯å¢ƒå¯åŠ¨
npm run dev

# 2. ä»£ç æäº¤
git add .
git commit -m "feat: æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½"
git push

# 3. ä»£ç æ£€æŸ¥
npm run lint
npm run format

# 4. æµ‹è¯•
npm run test

# 5. æ„å»ºéƒ¨ç½²
npm run build
npm run deploy:pm2
```

## åä¸€ã€æ‰©å±•è®¡åˆ’

### ğŸ“ˆ æœªæ¥æ‰©å±•è·¯å¾„
å½“é¡¹ç›®è§„æ¨¡å¢é•¿æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹æ‰©å±•ï¼š

1. **ç¼“å­˜æ‰©å±•**ï¼šå†…å­˜ç¼“å­˜ â†’ Redis
2. **æ•°æ®åº“æ‰©å±•**ï¼šå•æœºMongoDB â†’ MongoDBé›†ç¾¤
3. **éƒ¨ç½²æ‰©å±•**ï¼šç›´æ¥éƒ¨ç½² â†’ Docker â†’ Kubernetes
4. **ç›‘æ§æ‰©å±•**ï¼šåŸºç¡€æ—¥å¿— â†’ å®Œæ•´ç›‘æ§ç³»ç»Ÿ
5. **CDNæ‰©å±•**ï¼šæœ¬åœ°é™æ€æ–‡ä»¶ â†’ CDNåŠ é€Ÿ

## åäºŒã€æ€»ç»“

### âœ… æŠ€æœ¯æ ˆä¼˜åŠ¿
- **ç®€å•æ˜“ç”¨**ï¼šæŠ€æœ¯æ ˆç²¾ç®€ï¼Œå­¦ä¹ æˆæœ¬ä½
- **å¿«é€Ÿå¼€å‘**ï¼šVue3 + Expressç»„åˆå¼€å‘æ•ˆç‡é«˜
- **æ˜“äºéƒ¨ç½²**ï¼šæ— å¤æ‚ä¾èµ–ï¼Œéƒ¨ç½²ç®€å•
- **æˆæœ¬å¯æ§**ï¼šå•æœåŠ¡å™¨å³å¯è¿è¡Œ
- **å¯æ‰©å±•**ï¼šåæœŸå¯æ ¹æ®éœ€è¦é€æ­¥æ‰©å±•

### ğŸ¯ é€‚ç”¨åœºæ™¯
- ä¸ªäººåšå®¢ç½‘ç«™
- å°å‹å†…å®¹ç®¡ç†ç³»ç»Ÿ
- å­¦ä¹ é¡¹ç›®å’ŒåŸå‹å¼€å‘
- ä¸­å°å‹ä¼ä¸šå®˜ç½‘

è¿™ä¸ªæŠ€æœ¯æ ˆé…ç½®åœ¨ä¿è¯åŠŸèƒ½å®Œæ•´æ€§çš„åŒæ—¶ï¼Œå¤§å¹…é™ä½äº†å¤æ‚åº¦ï¼Œéå¸¸é€‚åˆä¸ªäººå¼€å‘è€…å¿«é€Ÿæ„å»ºå’Œéƒ¨ç½²ç½‘ç«™é¡¹ç›®ã€‚
